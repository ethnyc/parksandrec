<!DOCTYPE html>
<html>
<head>
  <link rel="shortcut icon" type="image/png" href="static/bee_icon.png"/>
  <title> Parks & Rec </title>
  <script src="/static/js/jquery-1.11.2.min.js"></script>
  <script src="/static/js/bootstrap.js"></script>
  <link rel="stylesheet" href="/static/css/bootstrap.css">
  <link rel="stylesheet" href="/static/css/script.css">
  <link href="http://fonts.googleapis.com/css?family=Lato:100" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="/static/js/content.js"></script>
  <script src="{{ url_for('static', filename='js/demo.js') }}"></script>

    <!-- JQUERY -->
  <script type='text/javascript' src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  <script type='text/javascript' src="/static/js/xdomain.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>

  <!--script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>-->
  <!-- BOOTSTRAP CODE -->
  <!-- Latest compiled and minified CSS -->
  {# <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> #}
  <!-- Optional theme -->
  {# <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"> #}
  <!-- Latest compiled and minified JavaScript -->
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <!-- Google maps API-->
  <!--script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>-->
  <!-- Get my IP -->
  <script type="text/javascript" src="http://l2.io/ip.js?var=myip"></script>


  <style type="text/css">
      html, body, #map-canvas { height: 1000px; margin: 0; padding: 0;}
  </style>
  <!--script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCPKCyC2GBCVF2hyj27uFITu2v2fQTSaWE">
  </script-->
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          // center: { lat: -34.397, lng: 150.644},
          center: { lat: 1.352083, lng: 103.819836},
          zoom: 12
        };

        var myLatlng = new google.maps.LatLng(1, 102);
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        var infowindow = new google.maps.InfoWindow({
          content: "COOL COMMUNITY CENTER"
        });
 
        coords = getCoords();
        for (i = 0; i < coords.length; i++) { 
          var lat = parseFloat(coords[i].point.split(",")[1]);
          var lng = parseFloat(coords[i].point.split(",")[0]);
          var myLatlng = new google.maps.LatLng(lat, lng);
          
          var marker = new google.maps.Marker({
            position: myLatlng,
            title: coords[i].name
          });
          marker.setMap(map);

          google.maps.event.addListener(marker, 'click', function () {
            infowindow.setContent(this.title);
            infowindow.open(map, this);
          });
        }


/////////////////

        var search_bar = document.getElementById('ideaLocation'),
          autocomplete = new google.maps.places.Autocomplete(search_bar),
          init = false

        console.log("initalizing maps")

        google.maps.event.addListener(autocomplete, 'place_changed', function () {
          console.log("hi before 222place")
          var place = autocomplete.getPlace()
          console.log(place)
          console.log("hi after place")
          if (!place.geometry) {
            return
          }
            var returned_location = []
            for (var key in place.geometry.location)
              if (typeof place.geometry.location[key] == 'number' && returned_location.length < 2)
                returned_location.push(place.geometry.location[key])
            $('#new_idea_loc_lat').val(returned_location[0])
            $('#new_idea_loc_long').val(returned_location[1])
        })
    

      }
//////////////////
      function getCoords() {
        var coordsArray = [];
        $.ajax({
          url: 'http://10.10.200.66:8080/places',
          async: false,
          dataType: 'json',
          success: function (json) {
            coordsArray = json;
          }
        });
        return coordsArray;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

</head>
<body>
     {#  <div class="header1">
      </div> #}

  <nav class="navbar navbar-default" >
  <div class="container-fluid" >
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">
        Parks and Rec 
        {# <img id = "logo" src="static/bee_wings.png" alt="icon here" style = "margin-left:50px " > #}
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
        <li><a href="#">Link</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">Link</a></li>
        <li>
          <button type="button" class="glyphicon glyphicon-pencil" data-toggle="modal" data-target="#myModal">
          </button>
        </li>
        


        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
            <li class="hor-padding-5"><button class="no-btn header-write-btn" data-toggle="modal" data-target="#submit-modal"><span class="glyphicon glyphicon-pencil"></span></button></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  

      <div > </div>
      <div class="row">

        <div class="col-lg-2">hello</div>
        <div class="col-md-8" >
          <form id="phrase_form">
            <div class="input-group" id="text_input_container">
              <input type="text" id="text_input" class="form-control" placeholder="Search for an Activity.." aria-describedby="basic-addon1"> </div>
          </form>
          <body>
            <div id = "map-canvas"> </div>
          </body>
        </div>
        <div class="col-lg-2">

            <ul>
              <li>Coffee</li>
              <li>Tea</li>
              <li>Milk</li>

              {{ name }}

            </ul>
        </div>
      </div>
    </div>

  </div>
</body>
</html>




<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Post an Activity!</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" role="form" id="new-idea">
          <input type="hidden" name="upvotes" value="0">
          <div class="form-group">
            <label for="ideaTitle" class="col-sm-2 control-label">Activity Name</label>
            <div class="col-sm-10">
              <input name="title" type="text" class="form-control" id="activity_name" placeholder="Title">
            </div>
          </div>

          <div class="form-group">
            <label for="ideaTitle" class="col-sm-2 control-label">Capacity</label>
            <div class="col-sm-10">
              <input name="title" type="text" class="form-control" id="capacity" placeholder="Number of People">
            </div>
          </div>
          <div class="form-group">
            <label for="ideaDesc" class="col-sm-2 control-label">Description</label>
            <div class="col-sm-10">
              <textarea name="body" class="form-control" id="ideaDesc" rows="10" placeholder = "Briefly describe your activity"></textarea>
            </div>
          </div>

          <div class="form-group">
            <label for="ideaLocation" class="col-sm-2 control-label">Location</label>
            <div class="col-sm-10">
              <input name="location" type="text" class="form-control" id="ideaLocation" placeholder="Location" autocomplete = "on">
              <input type="hidden" name="loclat" id="new_idea_loc_lat">
              <input type="hidden" name="loclong" id="new_idea_loc_long">
            </div>
          </div>
      
          <div class="form-group">
            <label for="ideaCat" class="col-sm-2 control-label">Start Time</label>
            <div class="col-sm-10">
              <input name="title" type="text" class="form-control" id="start-time" placeholder="Start Time">
            </div>
          </div>

          <div class="form-group">
            <label for="ideaCat" class="col-sm-2 control-label">End Time</label>
            <div class="col-sm-10">
              <input name="title" type="text" class="form-control" id="end-time" placeholder="End Time">
            </div>
          </div>
    
          <div class="form-group">
            <label for="ideaCat" class="col-sm-2 control-label">Category</label>
            <div class="col-sm-10">
              <select class="form-control" id="ideaDesc" rows="10" name="category">
              </select>
            </div>
          </div>
           
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">close</button>
        <input type="button" value = "hatch it!" id="add_idea" method="POST" form="new-idea" class="btn btn-primary" data-dismiss="modal">
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>




